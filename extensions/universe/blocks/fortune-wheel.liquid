{% # theme-check-disable ValidSchema %}
<link rel="stylesheet" href="{{ 'fortune-wheel.css' | asset_url }}">

{% assign uid = block.id %}

<div
  class="vt-wheel-overlay vt-wheel-overlay--hidden vt-wheel-overlay-{{ uid }}"
  data-vt-wheel-overlay
  data-uid="{{ uid }}"
  data-email="{{ customer.email | escape }}"
  data-error-message="{{ block.settings.error_message | escape }}"
  data-success-message="{{ block.settings.success_message | escape }}"
  style="
    --overlay-bg: {{ block.settings.overlay_bg }};
    --modal-bg: {{ block.settings.modal_bg }};
    --text-color: {{ block.settings.text_color }};
    --btn-bg: {{ block.settings.button_bg }};
    --btn-text: {{ block.settings.button_text }};
    --close-bg: {{ block.settings.close_bg }};
    --close-text: {{ block.settings.close_text }};
    --wheel-border: {{ block.settings.wheel_border }};
    --seg1: {{ block.settings.segment_color_1 }};
    --seg2: {{ block.settings.segment_color_2 }};
    --seg3: {{ block.settings.segment_color_3 }};
    --seg4: {{ block.settings.segment_color_4 }};
    --seg5: {{ block.settings.segment_color_5 }};
    --seg6: {{ block.settings.segment_color_6 }};
  "
>
  <div class="vt-wheel-modal">
    <button
      type="button"
      class="vt-wheel-close"
      aria-label="–ó–∞–∫—Ä–∏—Ç–∏"
    >
      √ó
    </button>

    <div class="vt-wheel-content">
      {% if block.settings.heading != blank %}
        <h2 class="vt-wheel-heading">
          {{ block.settings.heading }}
        </h2>
      {% endif %}

      {% if block.settings.subheading != blank %}
        <p class="vt-wheel-subheading">
          {{ block.settings.subheading }}
        </p>
      {% endif %}

      <div class="vt-wheel-layout">
        <!-- –õ–Ü–í–û: –∫–æ–ª–µ—Å–æ -->
        <div class="vt-wheel-wrapper">
          <div class="vt-wheel-pointer"></div>

          <div class="vt-wheel-disc">
            {%- comment -%} –ü–æ—Ä–æ–∂–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏, —Ç–µ–∫—Å—Ç –ø—ñ–¥—Å—Ç–∞–≤–∏—Ç—å JS –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –∞–ø–∫–∏ {%- endcomment -%}
            <span class="vt-wheel-label vt-wheel-label-1" data-segment-index="0"></span>
            <span class="vt-wheel-label vt-wheel-label-2" data-segment-index="1"></span>
            <span class="vt-wheel-label vt-wheel-label-3" data-segment-index="2"></span>
            <span class="vt-wheel-label vt-wheel-label-4" data-segment-index="3"></span>
            <span class="vt-wheel-label vt-wheel-label-5" data-segment-index="4"></span>
            <span class="vt-wheel-label vt-wheel-label-6" data-segment-index="5"></span>

            <div class="vt-wheel-center">?</div>
          </div>
        </div>

        <!-- –ü–†–ê–í–û: email + –∫–Ω–æ–ø–∫–∞ -->
        <div class="vt-wheel-side">
          {%- comment -%} –ë–ª–æ–∫ –∑ –µ–º–µ–π–ª–æ–º (–≤–∏–¥–∏–º–∏–π –î–û —Å–ø—ñ–Ω—É) {%- endcomment -%}
          <div class="vt-wheel-email-wrapper">
            <label for="vt-wheel-email-{{ uid }}" class="vt-wheel-email-label">
              {{ block.settings.email_label }}
            </label>
            <input
              id="vt-wheel-email-{{ uid }}"
              type="email"
              class="vt-wheel-email-input"
              placeholder="{{ block.settings.email_placeholder }}"
            >
          </div>

          {%- comment -%} –ë–ª–æ–∫ –∑ –ø—Ä–æ–º–æ–∫–æ–¥–æ–º (–ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–π –î–û —Å–ø—ñ–Ω—É) {%- endcomment -%}
          <div class="vt-wheel-code-wrapper vt-wheel-code-wrapper--hidden">
            <label class="vt-wheel-code-label">–í–∞—à –ø—Ä–æ–º–æ–∫–æ–¥:</label>
            <div class="vt-wheel-code-row">
              <input
                type="text"
                class="vt-wheel-code-input"
                readonly
              >
              <button type="button" class="vt-wheel-copy-btn">–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏</button>
            </div>
            <p class="vt-wheel-code-copied"></p>
          </div>

          <p class="vt-wheel-error" data-vt-wheel-error></p>

          {% if block.settings.button_label != blank %}
            <button type="button" class="vt-wheel-spin-btn">
              {{ block.settings.button_label }}
            </button>
          {% endif %}
        </div>
      </div>

      <p class="vt-wheel-success" data-vt-wheel-success></p>
    </div>
  </div>
</div>

{%- comment -%}
  –°—Ç—ñ–∫–Ω–∏–π —Ç—Ä–∏–≥–µ—Ä –∑–ª—ñ–≤–∞ –ø–æ —Ü–µ–Ω—Ç—Ä—É, –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è, –∫–æ–ª–∏ –ø–æ–ø–∞–ø –∑–∞–∫—Ä–∏—Ç–∏–π
{%- endcomment -%}
<button
  type="button"
  class="vt-wheel-trigger vt-wheel-trigger--hidden vt-wheel-trigger-{{ uid }}"
  aria-label="–í—ñ–¥–∫—Ä–∏—Ç–∏ –∫–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω–∏"
>
  üé°
</button>

<script src="{{ 'fortune-wheel.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Wheel of Fortune",
  "target": "section",
  "settings": [
    {
      "type": "header",
      "content": "–¢–µ–∫—Å—Ç"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "–ó–∞–≥–æ–ª–æ–≤–æ–∫",
      "default": "–ö—Ä—É—Ç–∏ –∫–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω–∏!"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "–ü—ñ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫",
      "default": "–û—Ç—Ä–∏–º–∞–π —Å–≤—ñ–π —à–∞–Ω—Å –Ω–∞ –ø–æ–¥–∞—Ä—É–Ω–æ–∫ –∞–±–æ –∑–Ω–∏–∂–∫—É."
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏",
      "default": "–ö—Ä—É—Ç–∏—Ç–∏ –∫–æ–ª–µ—Å–æ"
    },

    {
      "type": "header",
      "content": "–ï–º–µ–π–ª"
    },
    {
      "type": "text",
      "id": "email_label",
      "label": "–ü—ñ–¥–ø–∏—Å –¥–ª—è –ø–æ–ª—è email",
      "default": "–í–∫–∞–∂—ñ—Ç—å —Å–≤—ñ–π email, —â–æ–± –≤–∑—è—Ç–∏ —É—á–∞—Å—Ç—å:"
    },
    {
      "type": "text",
      "id": "email_placeholder",
      "label": "Placeholder email",
      "default": "you@example.com"
    },
    {
      "type": "text",
      "id": "error_message",
      "label": "–¢–µ–∫—Å—Ç –ø–æ–º–∏–ª–∫–∏ –ø—Ä–∏ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ / –ø–æ–≤—Ç–æ—Ä—ñ email",
      "default": "–í–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–∏–π email, —â–æ–± –∫—Ä—É—Ç–∏—Ç–∏ –∫–æ–ª–µ—Å–æ."
    },
    {
      "type": "text",
      "id": "success_message",
      "label": "–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –ø—Ä–æ–∫—Ä—É—á—É–≤–∞–Ω–Ω—è",
      "default": "–í–∏ —É—Å–ø—ñ—à–Ω–æ –ø—Ä–æ–∫—Ä—É—Ç–∏–ª–∏ –∫–æ–ª–µ—Å–æ!"
    },

    {
      "type": "header",
      "content": "–ö–æ–ª—å–æ—Ä–∏ –ø–æ–ø–∞–ø–∞"
    },
    {
      "type": "color",
      "id": "overlay_bg",
      "label": "–§–æ–Ω –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è",
      "default": "rgba(0,0,0,0.65)"
    },
    {
      "type": "color",
      "id": "modal_bg",
      "label": "–§–æ–Ω –≤—ñ–∫–Ω–∞",
      "default": "#111827"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "–ö–æ–ª—ñ—Ä —Ç–µ–∫—Å—Ç—É",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "button_bg",
      "label": "–§–æ–Ω –∫–Ω–æ–ø–∫–∏ ‚Äú–ö—Ä—É—Ç–∏—Ç–∏‚Äù",
      "default": "#10B981"
    },
    {
      "type": "color",
      "id": "button_text",
      "label": "–ö–æ–ª—ñ—Ä —Ç–µ–∫—Å—Ç—É –∫–Ω–æ–ø–∫–∏",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "close_bg",
      "label": "–§–æ–Ω –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä–∏—Ç–∏",
      "default": "#374151"
    },
    {
      "type": "color",
      "id": "close_text",
      "label": "–ö–æ–ª—ñ—Ä —ñ–∫–æ–Ω–∫–∏ –∑–∞–∫—Ä–∏—Ç–∏",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "wheel_border",
      "label": "–ö–æ–ª—ñ—Ä —Ä–∞–º–∫–∏ –∫–æ–ª–µ—Å–∞",
      "default": "#FBBF24"
    },

    {
      "type": "header",
      "content": "–ö–æ–ª—å–æ—Ä–∏ —Å–µ–∫—Ç–æ—Ä—ñ–≤ –∫–æ–ª–µ—Å–∞"
    },
    {
      "type": "color",
      "id": "segment_color_1",
      "label": "–°–µ–∫—Ç–æ—Ä 1",
      "default": "#F87171"
    },
    {
      "type": "color",
      "id": "segment_color_2",
      "label": "–°–µ–∫—Ç–æ—Ä 2",
      "default": "#FBBF24"
    },
    {
      "type": "color",
      "id": "segment_color_3",
      "label": "–°–µ–∫—Ç–æ—Ä 3",
      "default": "#34D399"
    },
    {
      "type": "color",
      "id": "segment_color_4",
      "label": "–°–µ–∫—Ç–æ—Ä 4",
      "default": "#60A5FA"
    },
    {
      "type": "color",
      "id": "segment_color_5",
      "label": "–°–µ–∫—Ç–æ—Ä 5",
      "default": "#A78BFA"
    },
    {
      "type": "color",
      "id": "segment_color_6",
      "label": "–°–µ–∫—Ç–æ—Ä 6",
      "default": "#F472B6"
    }
  ]
}
{% endschema %}
