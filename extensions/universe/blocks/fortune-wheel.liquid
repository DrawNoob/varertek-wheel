{% # theme-check-disable ValidSchema %}
<link rel="stylesheet" href="{{ 'fortune-wheel.css' | asset_url }}">

{% assign uid = block.id %}

<div
  class="vt-wheel-overlay vt-wheel-overlay--hidden vt-wheel-overlay-{{ uid }}"
  data-vt-wheel-overlay
  data-uid="{{ uid }}"
  data-email="{{ customer.email | escape }}"
  data-error-message="{{ block.settings.error_message | escape }}"
  data-success-message="{{ block.settings.success_message | escape }}"
  style="
    --overlay-bg: {{ block.settings.overlay_bg }};
    --modal-bg: {{ block.settings.modal_bg }};
    --text-color: {{ block.settings.text_color }};
    --btn-bg: {{ block.settings.button_bg }};
    --btn-text: {{ block.settings.button_text }};
    --close-bg: {{ block.settings.close_bg }};
    --close-text: {{ block.settings.close_text }};
    --wheel-border: {{ block.settings.wheel_border }};
    --seg1: {{ block.settings.segment_color_1 }};
    --seg2: {{ block.settings.segment_color_2 }};
    --seg3: {{ block.settings.segment_color_3 }};
    --seg4: {{ block.settings.segment_color_4 }};
    --seg5: {{ block.settings.segment_color_5 }};
    --seg6: {{ block.settings.segment_color_6 }};
  "
>
  <div class="vt-wheel-modal">
    <button
      type="button"
      class="vt-wheel-close"
      aria-label="Закрити"
    >
      <img 
        width="45"
        height="45"
        src="{{ 'close-icon.svg' | asset_url }}" 
        alt="Icon close">
    </button>

    <div class="vt-wheel-content">
      <div class="vt-wheel-layout">
        <div class="vt-wheel-hero">
          <div class="vt-wheel-wrapper">
            <div class="vt-wheel-pointer"></div>

            <div class="vt-wheel-disc">
              <div class="vt-wheel-labels" aria-hidden="true"></div>
              <div class="vt-wheel-center">
                <img src="{{ 'logo.png' |  asset_url }}" alt="">
              </div>
            </div>
          </div>

          <div class="vt-wheel-product">
            {% if block.settings.product_image != blank %}
              <img
                class="vt-wheel-product-image"
                src="{{ block.settings.product_image | image_url }}"
                alt="image"
                loading="lazy"
              >
            {% endif %}
          </div>
        </div>

        <div class="vt-wheel-side">
          {%- comment -%} Блок з email (опційний) {%- endcomment -%}
          <div class="vt-wheel-email-wrapper">
            {% if block.settings.heading != blank %}
              <h2 class="vt-wheel-heading">
                {{ block.settings.heading }}
              </h2>
            {% endif %}

            {% if block.settings.subheading != blank %}
              <p class="vt-wheel-subheading">
                {{ block.settings.subheading }}
              </p>
            {% endif %}
            <label for="vt-wheel-email-{{ uid }}" class="vt-wheel-email-label">
              {{ block.settings.email_label }}
            </label>
            <input
              id="vt-wheel-email-{{ uid }}"
              type="email"
              class="vt-wheel-email-input"
              placeholder="{{ block.settings.email_placeholder }}"
            >
          </div>

          {%- comment -%} Блок з промокодом {%- endcomment -%}
          <div class="vt-wheel-code-wrapper vt-wheel-code-wrapper--hidden">
            <label class="vt-wheel-code-label">Ваш промокод:</label>
            <div class="vt-wheel-code-row">
              <input
                type="text"
                class="vt-wheel-code-input"
                readonly
              >
              <button type="button" class="vt-wheel-copy-btn">Скопіювати</button>
            </div>
            <p class="vt-wheel-code-copied"></p>
          </div>

          <p class="vt-wheel-error" data-vt-wheel-error></p>
          <p class="vt-wheel-success" data-vt-wheel-success></p>

          {% if block.settings.button_label != blank %}
            <button type="button" class="vt-wheel-spin-btn">
              {{ block.settings.button_label }}
            </button>
          {% endif %}
        </div>
      </div>

    </div>
  </div>
</div>

{%- comment -%}
  Маленький тригер, щоб відкрити колесо після закриття.
{%- endcomment -%}
<button
  type="button"
  class="vt-wheel-trigger vt-wheel-trigger--hidden vt-wheel-trigger-{{ uid }}"
  aria-label="Відкрити колесо фортуни"
>
  GO
</button>

<script src="{{ 'fortune-wheel.js' | asset_url }}" defer></script>
<script src="{{ 'vt-analytics.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Wheel of Fortune",
  "target": "section",
  "settings": [
    {
      "type": "header",
      "content": "Тексти"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Заголовок",
      "default": "Крути колесо фортуни!"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Підзаголовок",
      "default": "Отримай свій шанс на подарунок або знижку."
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Текст кнопки",
      "default": "Крутити колесо"
    },

    {
      "type": "header",
      "content": "Email"
    },
    {
      "type": "text",
      "id": "email_label",
      "label": "Підпис до поля email",
      "default": "Вкажи свій email, щоб отримати подарунок:"
    },
    {
      "type": "text",
      "id": "email_placeholder",
      "label": "Placeholder email",
      "default": "you@example.com"
    },
    {
      "type": "text",
      "id": "error_message",
      "label": "Текст помилки при невалідному email",
      "default": "Введіть коректний email, щоб крутити колесо."
    },
    {
      "type": "text",
      "id": "success_message",
      "label": "Повідомлення після успішного крутіння",
      "default": "Ви успішно прокрутили колесо!"
    },
    {
      "type": "header",
      "content": "Зображення"
    },
    {
      "type": "image_picker",
      "id": "product_image",
      "label": "Картинка під колесом"
    },

    {
      "type": "header",
      "content": "Кольори попапа"
    },
    {
      "type": "color",
      "id": "overlay_bg",
      "label": "Фон затемнення",
      "default": "rgba(0,0,0,0.65)"
    },
    {
      "type": "color",
      "id": "modal_bg",
      "label": "Фон вікна",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Колір тексту",
      "default": "#111111"
    },
    {
      "type": "color",
      "id": "button_bg",
      "label": "Фон кнопки «Крутити»",
      "default": "#111111"
    },
    {
      "type": "color",
      "id": "button_text",
      "label": "Колір тексту кнопки",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "close_bg",
      "label": "Фон кнопки закрити",
      "default": "#111111"
    },
    {
      "type": "color",
      "id": "close_text",
      "label": "Колір іконки закрити",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "wheel_border",
      "label": "Колір рамки колеса",
      "default": "#111111"
    },

    {
      "type": "header",
      "content": "Кольори секторів колеса"
    },
    {
      "type": "color",
      "id": "segment_color_1",
      "label": "Сектор 1",
      "default": "#1f3b6d"
    },
    {
      "type": "color",
      "id": "segment_color_2",
      "label": "Сектор 2",
      "default": "#f6f3ed"
    },
    {
      "type": "color",
      "id": "segment_color_3",
      "label": "Сектор 3",
      "default": "#1f3b6d"
    },
    {
      "type": "color",
      "id": "segment_color_4",
      "label": "Сектор 4",
      "default": "#f6f3ed"
    },
    {
      "type": "color",
      "id": "segment_color_5",
      "label": "Сектор 5",
      "default": "#1f3b6d"
    },
    {
      "type": "color",
      "id": "segment_color_6",
      "label": "Сектор 6",
      "default": "#f6f3ed"
    }
  ]
}
{% endschema %}




