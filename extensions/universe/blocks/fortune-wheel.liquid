{% # theme-check-disable ValidSchema %}
<link rel="stylesheet" href="{{ 'fortune-wheel.css' | asset_url }}">

{% assign uid = block.id %}

<div
  class="vt-wheel-overlay vt-wheel-overlay--hidden vt-wheel-overlay-{{ uid }}"
  data-vt-wheel-overlay
  data-uid="{{ uid }}"
  data-email="{{ customer.email | escape }}"
  data-error-message="{{ block.settings.error_message | escape }}"
  data-success-message="{{ block.settings.success_message | escape }}"
>
  <div class="vt-wheel-modal">
    <button
      type="button"
      class="vt-wheel-close"
      aria-label="Закрити"
    >
      <img 
        width="45"
        height="45"
        src="{{ 'close-icon.svg' | asset_url }}" 
        alt="Icon close">
    </button>

    <div class="vt-wheel-content">
      <div class="vt-wheel-layout">
        <div class="vt-wheel-hero">
          <div class="vt-wheel-wrapper">
          <div class="vt-wheel-pointer">
            <img
              src="{{ 'pointer.svg' | asset_url }}"
              alt="Вказівник"
              width="40"
              height="40"
            >
          </div>

            <div class="vt-wheel-disc">
              <div class="vt-wheel-labels" aria-hidden="true"></div>
              <div class="vt-wheel-center">
                <img src="{{ 'logo.png' |  asset_url }}" alt="">
              </div>
            </div>
          </div>

          <div class="vt-wheel-product">
            {% if block.settings.product_image != blank %}
              <img
                class="vt-wheel-product-image"
                src="{{ block.settings.product_image | image_url }}"
                alt="image"
                loading="lazy"
              >
            {% endif %}
          </div>
        </div>

        <div class="vt-wheel-side">
          {%- comment -%} Блок з email (опційний) {%- endcomment -%}
          <div class="vt-wheel-email-wrapper">
            {% if block.settings.heading != blank %}
              <h2 class="vt-wheel-heading">
                {{ block.settings.heading }}
              </h2>
            {% endif %}

            {% if block.settings.subheading != blank %}
              <p class="vt-wheel-subheading">
                {{ block.settings.subheading }}
              </p>
            {% endif %}
            <label for="vt-wheel-email-{{ uid }}" class="vt-wheel-email-label">
              {{ block.settings.email_label }}
            </label>
            <input
              id="vt-wheel-email-{{ uid }}"
              type="email"
              class="vt-wheel-email-input"
              placeholder="{{ block.settings.email_placeholder }}"
            >
          </div>

          {%- comment -%} Блок з промокодом {%- endcomment -%}
          <div class="vt-wheel-code-wrapper vt-wheel-code-wrapper--hidden">
            <label style="color: black;" class="vt-wheel-code-label">Ваш промокод:</label>
            <div class="vt-wheel-code-row">
              <input
                type="text"
                class="vt-wheel-code-input"
                readonly
              >
              <button type="button" class="vt-wheel-copy-btn">Скопіювати</button>
            </div>
            <p class="vt-wheel-code-copied"></p>
          </div>

          <p class="vt-wheel-error" data-vt-wheel-error></p>
          <p class="vt-wheel-success" data-vt-wheel-success></p>

          {% if block.settings.button_label != blank %}
            <button type="button" class="vt-wheel-spin-btn">
              {{ block.settings.button_label }}
            </button>
          {% endif %}
        </div>
      </div>

    </div>
  </div>
</div>

{%- comment -%}
  Маленький тригер, щоб відкрити колесо після закриття.
{%- endcomment -%}
<button
  type="button"
  class="vt-wheel-trigger vt-wheel-trigger--hidden vt-wheel-trigger-{{ uid }}"
  aria-label="Відкрити колесо фортуни"
>
  GO
</button>

<script src="{{ 'fortune-wheel.js' | asset_url }}" defer></script>
<script src="{{ 'vt-analytics.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Wheel of Fortune",
  "target": "section",
  "settings": [
    {
      "type": "header",
      "content": "Тексти"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Заголовок",
      "default": "Крути колесо фортуни!"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Підзаголовок",
      "default": "Отримай свій шанс на подарунок або знижку."
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Текст кнопки",
      "default": "Крутити колесо"
    },

    {
      "type": "header",
      "content": "Email"
    },
    {
      "type": "text",
      "id": "email_label",
      "label": "Підпис до поля email",
      "default": "Вкажи свій email, щоб отримати подарунок:"
    },
    {
      "type": "text",
      "id": "email_placeholder",
      "label": "Placeholder email",
      "default": "you@example.com"
    },
    {
      "type": "text",
      "id": "error_message",
      "label": "Текст помилки при невалідному email",
      "default": "Введіть коректний email, щоб крутити колесо."
    },
    {
      "type": "text",
      "id": "success_message",
      "label": "Повідомлення після успішного крутіння",
      "default": "Ви успішно прокрутили колесо!"
    },
    {
      "type": "header",
      "content": "Зображення"
    },
    {
      "type": "image_picker",
      "id": "product_image",
      "label": "Картинка під колесом"
    },


  ]
}
{% endschema %}
