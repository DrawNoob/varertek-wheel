{% # theme-check-disable ValidSchema %}
<link rel="stylesheet" href="{{ 'countdown-timer.css' | asset_url }}">

{% assign uid = block.id %}

<div
  class="vt-countdown-banner vt-countdown-{{ uid }}"
  style="
    display: flex; flex-direction: column; gap: 20px;
    --uid: '{{ uid }}';
    --bg: {{ block.settings.bg_color }};
    --text: {{ block.settings.text_color }};
    --item-bg: {{ block.settings.item_bg }};
    --item-text: {{ block.settings.item_text_color }};
    --item-radius: {{ block.settings.item_radius }}px;
    --align: {{ block.settings.align }};
  "
  id="vt-countdown-{{ uid }}"
>
  <!-- Повна панель таймера -->
  <div class="vt-countdown-panel">
    <!-- Кнопка згортання -->
    <button
      type="button"
      class="vt-countdown-minimize"
      aria-label="Згорнути таймер"
    >
      ✕
    </button>

    <!-- Блок з таймером -->
    <div class="vt-countdown-top">
      <span class="vt-countdown-label"> До нового року залишилось: </span>

      <div class="vt-countdown-inner vt-countdown-inner-{{ uid }}">
        <div class="vt-countdown-values">
          <div class="vt-countdown-item">
            <span class="vt-countdown-number" data-unit="days">00</span>
            {% if block.settings.show_labels %}
              <span class="vt-countdown-title">{{ block.settings.label_days }}</span>
            {% endif %}
          </div>
          <div class="vt-countdown-sep">:</div>
          <div class="vt-countdown-item">
            <span class="vt-countdown-number" data-unit="hours">00</span>
            {% if block.settings.show_labels %}
              <span class="vt-countdown-title">{{ block.settings.label_hours }}</span>
            {% endif %}
          </div>
          <div class="vt-countdown-sep">:</div>
          <div class="vt-countdown-item">
            <span class="vt-countdown-number" data-unit="minutes">00</span>
            {% if block.settings.show_labels %}
              <span class="vt-countdown-title">{{ block.settings.label_minutes }}</span>
            {% endif %}
          </div>
          <div class="vt-countdown-sep">:</div>
          <div class="vt-countdown-item">
            <span class="vt-countdown-number" data-unit="seconds">00</span>
            {% if block.settings.show_labels %}
              <span class="vt-countdown-title">{{ block.settings.label_seconds }}</span>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- МІНІ-ВАРІАНТ — кружок з таймером -->
  <button
    type="button"
    class="vt-countdown-fab"
    aria-label="Розгорнути таймер"
  >
    <span class="vt-countdown-fab-line"> <span data-unit="days-mini">00</span>d </span>
    <span class="vt-countdown-fab-line"> <span data-unit="hours-mini">00</span>h </span>
    <span class="vt-countdown-fab-line"> <span data-unit="minutes-mini">00</span>m </span>
  </button>
</div>

<script src="{{ 'countdown-timer-core.js' | asset_url }}" defer></script>
<script src="{{ 'countdown-timer.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Countdown timer",
  "target": "section",
  "settings": [
    {
      "type": "color",
      "id": "bg_color",
      "label": "Фон банера",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Колір тексту",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "item_bg",
      "label": "Фон елементів (d/h/m/s)",
      "default": "#1F2937"
    },
    {
      "type": "color",
      "id": "item_text_color",
      "label": "Колір цифр",
      "default": "#FFFFFF"
    },
    {
      "type": "range",
      "id": "item_radius",
      "label": "Заокруглення елементів",
      "min": 0,
      "max": 20,
      "step": 1,
      "default": 6
    },
    {
      "type": "select",
      "id": "align",
      "label": "Вирівнювання",
      "default": "center",
      "options": [
        { "value": "left", "label": "Ліворуч" },
        { "value": "center", "label": "По центру" },
        { "value": "right", "label": "Праворуч" }
      ]
    },
    {
      "type": "checkbox",
      "id": "show_labels",
      "label": "Показувати підписи d/h/m/s",
      "default": true
    },
    {
      "type": "text",
      "id": "label_days",
      "label": "Підпис для днів",
      "default": "d"
    },
    {
      "type": "text",
      "id": "label_hours",
      "label": "Підпис для годин",
      "default": "h"
    },
    {
      "type": "text",
      "id": "label_minutes",
      "label": "Підпис для хвилин",
      "default": "m"
    },
    {
      "type": "text",
      "id": "label_seconds",
      "label": "Підпис для секунд",
      "default": "s"
    }
  ]
}
{% endschema %}
